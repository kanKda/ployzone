!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){GIFEncoder=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function n(){this.bin=[]}n.prototype.getData=function(){for(var e="",n=this.bin.length,r=0;r<n;r++)e+=t[this.bin[r]];return e},n.prototype.writeByte=function(e){this.bin.push(e)},n.prototype.writeUTFBytes=function(e){for(var t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))},n.prototype.writeBytes=function(e,t,n){for(var r=n||e.length,o=t||0;o<r;o++)this.writeByte(e[o])};var r,o,c,l,i,u,a,s,f,d={},m=null,h=-1,y=0,g=!1,v=[],w=7,E=-1,p=!1,b=!0,B=!1,F=10,k="Generated by jsgif (https://github.com/antimatter15/jsgif/)",L=(d.setDelay=function(e){y=Math.round(e/10)},d.setDispose=function(e){e>=0&&(E=e)},d.setRepeat=function(e){e>=0&&(h=e)},d.setTransparent=function(e){m=e},d.setComment=function(e){k=e},d.addFrame=function(e,t){if(null===e||!g||null===l)throw new Error("Please call start method before calling addFrame");var n=!0;try{t?e instanceof ImageData?(i=e.data,sizeset&&r==e.width&&o==e.height||M(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==r*o*4?i=e:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(i=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,B||M(e.canvas.width,e.canvas.height)),C(),S(),b&&(A(),T(),h>=0&&P()),R(),""!==k&&x(),z(),b||T(),q(),b=!1}catch(e){n=!1}return n},d.download=function(e){if(null===l||0==p)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?e.endsWith(".gif")?e:e+".gif":"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(l.bin)],{type:"image/gif"})),t.click()}},d.finish=function(){if(!g)return!1;var e=!0;g=!1;try{l.writeByte(59),p=!0}catch(t){e=!1}return e},function(){c=0,i=null,u=null,a=null,f=null,p=!1,b=!0}),M=(d.setFrameRate=function(e){15!=e&&(y=Math.round(100/e))},d.setQuality=function(e){e<1&&(e=1),F=e},d.setSize=function(e,t){g&&!b||((r=e)<1&&(r=320),(o=t)<1&&(o=240),B=!0)}),S=(d.start=function(){L();var e=!0;p=!1,l=new n;try{l.writeUTFBytes("GIF89a")}catch(t){e=!1}return g=e},d.cont=function(){L();return p=!1,l=new n,g=!0},function(){var e=u.length,t=e/3;a=[];var n=new NeuQuant(u,e,F);f=n.process();for(var r=0,o=0;o<t;o++){var l=n.map(255&u[r++],255&u[r++],255&u[r++]);v[l]=!0,a[o]=l}u=null,s=8,w=7,null!==m&&(c=I(m))}),I=function(e){if(null===f)return-1;for(var t=(16711680&e)>>16,n=(65280&e)>>8,r=255&e,o=0,c=16777216,l=f.length,i=0;i<l;){var u=t-(255&f[i++]),a=n-(255&f[i++]),s=r-(255&f[i]),d=u*u+a*a+s*s,m=i/3;v[m]&&d<c&&(c=d,o=m),i++}return o},C=function(){var e=r,t=o;u=[];for(var n=i,c=0,l=0;l<t;l++)for(var a=0;a<e;a++){var s=l*e*4+4*a;u[c++]=n[s],u[c++]=n[s+1],u[c++]=n[s+2]}},R=function(){var e,t;l.writeByte(33),l.writeByte(249),l.writeByte(4),null===m?(e=0,t=0):(e=1,t=2),E>=0&&(t=7&E),t<<=2,l.writeByte(0|t|e),U(y),l.writeByte(c),l.writeByte(0)},x=function(){l.writeByte(33),l.writeByte(254),l.writeByte(k.length),l.writeUTFBytes(k),l.writeByte(0)},z=function(){l.writeByte(44),U(0),U(0),U(r),U(o),b?l.writeByte(0):l.writeByte(128|w)},A=function(){U(r),U(o),l.writeByte(240|w),l.writeByte(0),l.writeByte(0)},P=function(){l.writeByte(33),l.writeByte(255),l.writeByte(11),l.writeUTFBytes("NETSCAPE2.0"),l.writeByte(3),l.writeByte(1),U(h),l.writeByte(0)},T=function(){l.writeBytes(f);for(var e=768-f.length,t=0;t<e;t++)l.writeByte(0)},U=function(e){l.writeByte(255&e),l.writeByte(e>>8&255)},q=function(){new LZWEncoder(r,o,a,s).encode(l)};d.stream=function(){return l},d.setProperties=function(e,t){g=e,b=t};return d}},function(e,t){LZWEncoder=function(){var e,t,n,r,o,c,l,i,u,a,s,f,d={},m=-1,h=12,y=5003,g=h,v=1<<h,w=[],E=[],p=y,b=0,B=!1,F=0,k=0,L=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],M=[],S=d.LZWEncoder=function(o,c,l,i){e=o,t=c,n=l,r=Math.max(2,i)},I=function(e,t){M[f++]=e,f>=254&&z(t)},C=function(e){R(p),b=a+2,B=!0,T(a,e)},R=function(e){for(var t=0;t<e;++t)w[t]=-1},x=d.compress=function(e,t){var n,r,o,c,d,h,y;for(B=!1,i=A(l=u=e),s=(a=1<<e-1)+1,b=a+2,f=0,c=P(),y=0,n=p;n<65536;n*=2)++y;y=8-y,R(h=p),T(a,t);e:for(;(o=P())!=m;)if(n=(o<<g)+c,w[r=o<<y^c]!=n){if(w[r]>=0){d=h-r,0===r&&(d=1);do{if((r-=d)<0&&(r+=h),w[r]==n){c=E[r];continue e}}while(w[r]>=0)}T(c,t),c=o,b<v?(E[r]=b++,w[r]=n):C(t)}else c=E[r];T(c,t),T(s,t)},z=(d.encode=function(n){n.writeByte(r),o=e*t,c=0,x(r+1,n),n.writeByte(0)},function(e){f>0&&(e.writeByte(f),e.writeBytes(M,0,f),f=0)}),A=function(e){return(1<<e)-1},P=function(){return 0===o?m:(--o,255&n[c++])},T=function(e,t){for(F&=L[k],k>0?F|=e<<k:F=e,k+=l;k>=8;)I(255&F,t),F>>=8,k-=8;if((b>i||B)&&(B?(i=A(l=u),B=!1):(++l,i=l==g?v:A(l))),e==s){for(;k>0;)I(255&F,t),F>>=8,k-=8;z(t)}};return S.apply(this,arguments),d}},function(e,t){NeuQuant=function(){var e,t,n,r,o,c={},l=256,i=499,u=491,a=487,s=503,f=3*s,d=l-1,m=4,h=100,y=16,g=1<<y,v=10,w=10,E=g>>w,p=g<<v-w,b=l>>3,B=6,F=1<<B,k=b*F,L=30,M=10,S=1<<M,I=8,C=1<<I,R=M+I,x=1<<R,z=[],A=[],P=[],T=[],U=c.NeuQuant=function(e,c,i){var u,a;for(t=e,n=c,r=i,o=new Array(l),u=0;u<l;u++)o[u]=new Array(4),(a=o[u])[0]=a[1]=a[2]=(u<<m+8)/l,P[u]=g/l,A[u]=0},q=function(){for(var e=[],t=new Array(l),n=0;n<l;n++)t[o[n][3]]=n;for(var r=0,c=0;c<l;c++){var i=t[c];e[r++]=o[i][0],e[r++]=o[i][1],e[r++]=o[i][2]}return e},j=function(){var e,t,n,r,c,i,u,a;for(u=0,a=0,e=0;e<l;e++){for(n=e,r=(c=o[e])[1],t=e+1;t<l;t++)(i=o[t])[1]<r&&(n=t,r=i[1]);if(i=o[n],e!=n&&(t=i[0],i[0]=c[0],c[0]=t,t=i[1],i[1]=c[1],c[1]=t,t=i[2],i[2]=c[2],c[2]=t,t=i[3],i[3]=c[3],c[3]=t),r!=u){for(z[u]=a+e>>1,t=u+1;t<r;t++)z[t]=e;u=r,a=e}}for(z[u]=a+d>>1,t=u+1;t<256;t++)z[t]=d},N=function(){var o,c,l,d,y,g,v,w,E,p,b,F,M,I;for(n<f&&(r=1),e=30+(r-1)/3,F=t,M=0,I=n,p=(b=n/(3*r))/h|0,w=S,(v=(g=k)>>B)<=1&&(v=0),o=0;o<v;o++)T[o]=w*((v*v-o*o)*C/(v*v));for(E=n<f?3:n%i!=0?3*i:n%u!=0?3*u:n%a!=0?3*a:3*s,o=0;o<b;)if(l=(255&F[M+0])<<m,d=(255&F[M+1])<<m,y=(255&F[M+2])<<m,c=D(l,d,y),Y(w,c,l,d,y),0!==v&&X(v,c,l,d,y),(M+=E)>=I&&(M-=n),0===p&&(p=1),++o%p==0)for(w-=w/e,(v=(g-=g/L)>>B)<=1&&(v=0),c=0;c<v;c++)T[c]=w*((v*v-c*c)*C/(v*v))},O=(c.map=function(e,t,n){var r,c,i,u,a,s,f;for(a=1e3,f=-1,c=(r=z[t])-1;r<l||c>=0;)r<l&&((i=(s=o[r])[1]-t)>=a?r=l:(r++,i<0&&(i=-i),(u=s[0]-e)<0&&(u=-u),(i+=u)<a&&((u=s[2]-n)<0&&(u=-u),(i+=u)<a&&(a=i,f=s[3])))),c>=0&&((i=t-(s=o[c])[1])>=a?c=-1:(c--,i<0&&(i=-i),(u=s[0]-e)<0&&(u=-u),(i+=u)<a&&((u=s[2]-n)<0&&(u=-u),(i+=u)<a&&(a=i,f=s[3]))));return f},c.process=function(){return N(),O(),j(),q()},function(){var e;for(e=0;e<l;e++)o[e][0]>>=m,o[e][1]>>=m,o[e][2]>>=m,o[e][3]=e}),X=function(e,t,n,r,c){var i,u,a,s,f,d,m;for((a=t-e)<-1&&(a=-1),(s=t+e)>l&&(s=l),i=t+1,u=t-1,d=1;i<s||u>a;){if(f=T[d++],i<s){m=o[i++];try{m[0]-=f*(m[0]-n)/x,m[1]-=f*(m[1]-r)/x,m[2]-=f*(m[2]-c)/x}catch(e){}}if(u>a){m=o[u--];try{m[0]-=f*(m[0]-n)/x,m[1]-=f*(m[1]-r)/x,m[2]-=f*(m[2]-c)/x}catch(e){}}}},Y=function(e,t,n,r,c){var l=o[t];l[0]-=e*(l[0]-n)/S,l[1]-=e*(l[1]-r)/S,l[2]-=e*(l[2]-c)/S},D=function(e,t,n){var r,c,i,u,a,s,f,d,h,g;for(h=d=~(1<<31),f=s=-1,r=0;r<l;r++)(c=(g=o[r])[0]-e)<0&&(c=-c),(i=g[1]-t)<0&&(i=-i),c+=i,(i=g[2]-n)<0&&(i=-i),(c+=i)<d&&(d=c,s=r),(u=c-(A[r]>>y-m))<h&&(h=u,f=r),a=P[r]>>w,P[r]-=a,A[r]+=a<<v;return P[s]+=E,A[s]-=p,f};return U.apply(this,arguments),c}},function(e,t){function n(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?console.log("Current full screen element is : "+(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)):"exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document?document.webkitExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"msExitFullscreen"in document&&document.msExitFullscreen()}document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),document.addEventListener("fullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("webkitfullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("mozfullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("MSFullscreenError",(function(){console.log("Full screen failed")})),document.getElementById("canvasPreview").addEventListener("click",(function(){if("fullscreenEnabled"in document||"webkitFullscreenEnabled"in document||"mozFullScreenEnabled"in document||"msFullscreenEnabled"in document){if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){console.log("User allows fullscreen");"requestFullscreen"in this?this.requestFullscreen():"webkitRequestFullscreen"in this?this.webkitRequestFullscreen():"mozRequestFullScreen"in this?this.mozRequestFullScreen():"msRequestFullscreen"in this&&this.msRequestFullscreen()}}else console.log("User doesn't allow full screen")}))},function(e,t,n){"use strict";n.r(t);n(5);const r=document.getElementById("canvas"),o=r.getContext("2d"),c=512;[r.width,r.height]=[c,c],o.fillStyle="black",o.fillRect(0,0,c,c),o.strokeStyle="black";let l=32,i=c/l,u=16;function a(){o.fillRect(0,0,c,c)}a();let s="pencil";const f=document.querySelector(".tools").children;for(let e=0;e<f.length-3;e+=1)f[e].addEventListener("click",(function(){this.classList.add("active");for(let e=0;e<f.length-1;e+=1)f[e].id!==this.id&&f[e].classList.remove("active");s=this.id}));let d="yellow";document.getElementById("currentCircle").addEventListener("click",(function(){document.getElementById("colorInput").click()})),document.getElementById("colorInput").addEventListener("input",(function(){d=document.getElementById("colorInput").value;const e=document.getElementById("currentCircle").style.background;document.getElementById("currentCircle").style.background=d,document.getElementById("previousCircle").style.background=e})),document.getElementById("previousCircle").addEventListener("click",(function(){const e=document.getElementById("currentCircle").style.background;document.getElementById("currentCircle").style.background=this.style.background,d=this.style.background,this.style.background=e}));const m=[];function h(){for(let e=0;e<l;e+=1){m[e]=new Array(l);for(let t=0;t<l;t+=1)m[e][t]="black"}}function y(e,t,n,r,o){let c=0,l=0,i=e/r;for(;l!=i;)m[n+l][t+c]=o,c+=1,c==i&&(c=0,l+=1)}h();const g=document.querySelector(".penSizes").children;for(let e=0;e<g.length;e+=1)g[e].addEventListener("click",(function(){this.classList.add("activeSizeUnit");for(let e=0;e<g.length;e+=1)g[e].id!==this.id&&g[e].classList.remove("activeSizeUnit");u=this.id.match(/\d+/)[0],console.log(u)}));r.addEventListener("mousedown",(function(e){switch(s){case"pencil":!function(e){o.fillStyle=d,o.fillRect(Math.floor(e.offsetX/i)*i,Math.floor(e.offsetY/i)*i,u,u),y(u,Math.floor(e.offsetX/i),Math.floor(e.offsetY/i),i,d),r.onmousemove=function(e){o.fillRect(Math.floor(e.offsetX/i)*i,Math.floor(e.offsetY/i)*i,u,u),y(u,Math.floor(e.offsetX/i),Math.floor(e.offsetY/i),i,d)}}(e);break;case"colorPick":!function(e){let t=Math.floor(e.offsetX/i),n=Math.floor(e.offsetY/i);d=m[n][t];const r=document.getElementById("currentCircle").style.background;document.getElementById("currentCircle").style.background=d,document.getElementById("previousCircle").style.background=r}(e);break;case"eraser":!function(e){o.fillStyle="black",o.fillRect(Math.floor(e.offsetX/i)*i,Math.floor(e.offsetY/i)*i,u,u),r.onmousemove=function(e){o.strokeRect(Math.floor(e.offsetX/i)*i,Math.floor(e.offsetY/i)*i,u,u),o.fillRect(Math.floor(e.offsetX/i)*i,Math.floor(e.offsetY/i)*i,u,u),y(u,Math.floor(e.offsetX/i),Math.floor(e.offsetY/i),i,"black")}}(e);break;case"wand":!function(e){o.fillStyle=d;let t=Math.floor(e.offsetX/i),n=Math.floor(e.offsetY/i);const r=m[n][t];for(let e=0;e<m.length;e+=1)for(let t=0;t<m[e].length;t+=1)m[e][t]===r&&(m[e][t]=d,o.fillRect(t*i,e*i,i,i))}(e)}})),r.addEventListener("mouseup",(function(){r.onmousemove=null,o.fillStyle=d})),r.addEventListener("mouseout",(function(){r.onmousemove=null}));n(0),n(1),n(2);function v(e,t){e=Math.floor(1e3/e);const n=new GIFEncoder;n.setRepeat(0),n.setDelay(e),n.start();for(let e of t)n.addFrame(e);return n.finish(),"data:image/gif;base64,"+function(e){for(var t,n,r,o,c,l,i,u="",a=0,s=e.length,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a<s;)o=(t=e.charCodeAt(a++))>>2,c=(3&t)<<4|(n=e.charCodeAt(a++))>>4,l=(15&n)<<2|(r=e.charCodeAt(a++))>>6,i=63&r,isNaN(n)?l=i=64:isNaN(r)&&(i=64),u=u+f.charAt(o)+f.charAt(c)+f.charAt(l)+f.charAt(i);return u}(n.stream().getData())}const w={};let E=10,p=0;function b(e){const t=document.getElementById("canvasPreview"),n=[];for(let e in w){const t=w[e].frame;n.push(t)}const r=v(e,n);t.src=r,document.getElementById("downloadGif").href=r}document.getElementById("appendFrame").addEventListener("click",(function(){const e=document.createElement("canvas"),t=document.createElement("label"),n=document.createElement("canvas");n.width=512,n.height=512,e.width=128,e.height=128,e.id=`frame${p}`,t.for=`frame${p}`,t.innerHTML=`Layer ${p}  [x]`;const o=n.getContext("2d"),c=e.getContext("2d");o.drawImage(r,0,0),c.drawImage(r,0,0,128,128),e.classList.add("frame"),t.classList.add("frameLabel");const l=document.querySelector(".frameScope");t.addEventListener("click",(function(){delete w[e.id],e.remove(),p-=1,t.remove();for(let e=0;e<l.children.length;e+=1)if("label"===l.children[e].outerHTML.slice(1,6)){let n=l.children[e].innerHTML;if(n.match(/\d+/)[0]>t.innerHTML.match(/\d+/)[0]){const t=l.children[e].innerHTML.replace(/\d+/,parseInt(n.match(/\d+/)[0])-1);l.children[e].innerHTML=t}}b(E)})),l.append(t),l.append(e),w[e.id]={frame:o,canvasMemory:JSON.parse(JSON.stringify(m))},p+=1,r.getContext("2d").fillStyle="black",a(),h(),b(E)}));const B=document.getElementById("fpsMeter");B.addEventListener("input",(function(){const e=document.getElementById("fpsValue");E=this.value,e.innerHTML=`${E} FPS`})),B.addEventListener("mouseup",(function(){w&&b(E)}));n(3)},function(e,t){}]);